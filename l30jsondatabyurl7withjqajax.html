<!DOCTYPE html>
<html>
<head>
    <title>Joke API From URL 6 by jQuery Ajax</title>
    <style type="text/css">
        body{
            height: 100vh;

            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container{
            width: 300px;
            background-color: #f4f4f4;
            padding: 10px;
        }
    </style>
</head>
<body>

    <div class="container">
        <h3 id="display"></h3>
        <button type="button" id="btn">Click me</button>
    </div>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js" type="text/javascript"></script>
    
    <script type="text/javascript">

        var getbtn = document.getElementById('btn');

        var getdisplay = document.getElementById('display');

        getbtn.addEventListener('click',function(){
            loaddata();
        });


        // function loaddata(){

            
        //     var key = `gj4vh8qkl3lttv5t`;
        //     var url = `https://api.ipregistry.co?key=${key}`;;

        //     // fetch(url).then(function(response){
        //     //     return response.json();
        //     // }).then(function(data){
        //     //     var html = `
        //     //         <ul>
        //     //             <li>External IP = ${data.ip}</li>
        //     //             <li>Current Device = ${data.user_agent["device"]["name"]} / ${data.user_agent["device"]["type"]}</li>
        //     //             <li>Operating System = ${data.user_agent.os.name}</li>
        //     //             <li>Load By = ${data.user_agent.type}</li>
        //     //             <li>City = ${data.location.city}</li>
        //     //             <li>Local Currency = ${data.currency.symbol}</li>
        //     //             <li>Time Zone = ${data.time_zone.id}</li>
        //     //         </ul>
        //     //     `;
        //     //     getdisplay.innerHTML = html;

        //     // }).catch(function(err){
        //     //     console.log(err);
        //     // });

            

        //     // xmlhttp.open("GET",url); // default mean yes synchronize
        //     // xmlhttp.onload = function(){
        //     //     // console.log(xmlhttp);

        //     //     var result = xmlhttp.response;

        //     //     result = JSON.parse(result);
        //     //     console.log(result);

        //     //     var html = `
        //     //         <ul>
        //     //             <li>External IP = ${result.ip}</li>
        //     //             <li>Current Device = ${result.user_agent["device"]["name"]} / ${result.user_agent["device"]["type"]}</li>
        //     //             <li>Operating System = ${result.user_agent.os.name}</li>
        //     //             <li>Load By = ${result.user_agent.type}</li>
        //     //             <li>City = ${result.location.city}</li>
        //     //             <li>Local Currency = ${result.currency.symbol}</li>
        //     //             <li>Time Zone = ${result.time_zone.id}</li>

        //     //         </ul>
        //     //     `;

        //     //     getdisplay.innerHTML = html;
        //     // }

        //     // xmlhttp.send();


        // }

        function loaddata(){

            var key = `gj4vh8qkl3lttv5t`;
            var url = `https://api.ipregistry.co?key=${key}`;;


            $.ajax({
                method:"GET",
                url:url,
                dataType:'json'
            }).done((data)=>{
                var html = `
                    <ul>
                        <li>External IP = ${data.ip}</li>
                        <li>Current Device = ${data.user_agent["device"]["name"]} / ${data.user_agent["device"]["type"]}</li>
                        <li>Operating System = ${data.user_agent.os.name}</li>
                        <li>Load By = ${data.user_agent.type}</li>
                        <li>City = ${data.location.city}</li>
                        <li>Local Currency = ${data.currency.symbol}</li>
                        <li>Time Zone = ${data.time_zone.id}</li>
                    </ul>
                `;
                getdisplay.innerHTML = html;
            }).fail(()=>{
                console.log("Error");
            });
        }


    </script>
</body>
</html>
